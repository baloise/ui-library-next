<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <link rel="stylesheet" href="/build/ui-library-next.css" />
    <script type="module" src="/build/ui-library-next.esm.js"></script>
    <script nomodule src="/build/ui-library-next.js"></script>
  </head>
  <body class="bal-app">
    <div class="container">
      <h2 class="title is-size-2">Basic</h2>
      <section>
        <bal-select id="bal-select-year" placeholder="select a year">
          <bal-select-option value="1995" label="1995">1995</bal-select-option>
          <bal-select-option value="1996" label="1996">1996</bal-select-option>
          <bal-select-option value="1997" label="1997">1997</bal-select-option>
          <bal-select-option value="1998" label="1998">1998</bal-select-option>
          <bal-select-option value="1999" label="1999">1999</bal-select-option>
          <bal-select-option value="2000" label="2000">2000</bal-select-option>
        </bal-select>
        <bal-select id="bal-select-year-disabled" disabled placeholder="disabled"></bal-select>

        <bal-button id="bal-select-year-clear">Clear</bal-button>
      </section>
      <script>
        var selectYear = document.getElementById('bal-select-year')
        var buttonYear = document.getElementById('bal-select-year-clear')
        buttonYear.addEventListener('click', function () {
          selectYear.clear()
        })
      </script>

      <h2 class="title is-size-2">Inverted & Expanded</h2>
      <section>
        <div class="has-background-blue is-padded">
          <bal-select id="bal-select-year-inverted" inverted expanded placeholder="select a year">
            <bal-select-option value="1995" label="1995">1995</bal-select-option>
            <bal-select-option value="1996" label="1996">1996</bal-select-option>
            <bal-select-option value="1997" label="1997">1997</bal-select-option>
            <bal-select-option value="1998" label="1998">1998</bal-select-option>
            <bal-select-option value="1999" label="1999">1999</bal-select-option>
            <bal-select-option value="2000" label="2000">2000</bal-select-option>
          </bal-select>
        </div>  
      </section>

      <h2 class="title is-size-2">Custom Option Style</h2>
      <section>
        <bal-select id="bal-select-custom" placeholder="select a hero">
          <bal-select-option value="1" label="Ant-Man">
            <b>Ant-Man</b></br>
            <span>San Francisco</span>
          </bal-select-option>
          <bal-select-option value="2" label="Spider-Man">
            <b>The amating Spider-Man The amating Spider-Man The amating Spider-Man</b></br>
            <span>Queens</span>
          </bal-select-option>
          <bal-select-option value="3" label="Iron-Man">
            <b>Iron-Man</b></br>
            <span>Malibu</span>
          </bal-select-option>
        </bal-select>
      </section>

      <h2 class="title is-size-2">Typeahead</h2>
      <section>
        <bal-select id="bal-select-typeahead-heros" typeahead placeholder="start typing"></bal-select>
      </section>
      <script>
        var heros = [
          { label: 'Ant-Man', value: 1, location: 'San Francisco' },
          { label: 'Spider-Man', value: 2, location: 'Queens' },
          { label: 'Iron Man', value: 3, location: 'Malibu' },
          { label: 'Black Panter', value: 4, location: 'Wakanda' },
          { label: 'Black Widow', value: 5, location: 'Russia' },
          { label: 'Captain America', value: 6, location: 'Brooklyn' },
          { label: 'Captain Marvel', value: 7, location: 'Somewhere' },
          { label: 'Vision', value: 8, location: 'Scotland' },
          { label: 'Falcon', value: 9, location: 'Washington' },
          { label: 'Thor', value: 10, location: 'Asgard' },
          { label: 'Hulk', value: 11, location: 'Hidden' },
          { label: 'Hawkeye', value: 12, location: 'Shield' },
          { label: 'Doctor Strange', value: 13, location: 'Manhatten' },
          { label: 'Wasp', value: 14, location: 'San Francisco' },
        ]
        setTimeout(function(){
          heros.forEach(function(hero) {
            var option = document.createElement('bal-select-option')
            option.setAttribute('value', hero.value)
            option.setAttribute('label', hero.label)
            option.innerHTML = '<b>' + hero.label + '</b></br><span>' + hero.location + '</span>'
            document
              .getElementById('bal-select-typeahead-heros')
              .querySelector('.dropdown-content')
              .appendChild(option)
          })
        }, 1000)
      </script>

      <h3 class="title is-size-3">Remote</h3>
      <section>
        <bal-field id="bal-select-typeahead-remote-field" label="Star Wars Character" is-expanded>
          <bal-select id="bal-select-typeahead-remote" typeahead remote placeholder="start typing" expanded></bal-select>
        </bal-field>
        <p class="help" id="bal-select-typeahead-remote-help"></p>
      </section>
      <script>
        var selectTypeaheadRemote = document.getElementById('bal-select-typeahead-remote')
        var selectTypeaheadRemoteField = document.getElementById('bal-select-typeahead-remote-field')
        var selectTypeaheadRemoteHelp = document.getElementById('bal-select-typeahead-remote-help')
        selectTypeaheadRemote.addEventListener('balChange', function (event) {
          selectTypeaheadRemoteHelp.innerHTML = event.detail
        })
        selectTypeaheadRemote.addEventListener('balInput', function (event) {
          var search = event.detail
          selectTypeaheadRemote.loading = true
          selectTypeaheadRemoteField.loading = true
          fetch('https://swapi.dev/api/people/?search=' + search)
            .then(res => res.json())
            .then(data => {
              console.log(selectTypeaheadRemote.querySelectorAll('bal-select-option'))
              selectTypeaheadRemote.querySelectorAll('bal-select-option')
                .forEach(function(element) {
                  element.parentNode.removeChild(element)
                })
              data.results.forEach((person) => {
                var option = document.createElement('bal-select-option')
                option.setAttribute('value', person.url)
                option.setAttribute('label', person.name)
                option.innerHTML = person.name
                selectTypeaheadRemote.querySelector('.dropdown-content').appendChild(option)
              })
              selectTypeaheadRemote.loading = false
              selectTypeaheadRemoteField.loading = false
            })
        })
      </script>
    </div>
  </body>
</html>
